{"version":3,"sources":["actions/loginActions.js","components/NavBar.js","components/Login.js","components/Register.js","components/Product.js","components/ProductList.js","components/BasketList.js","components/Basket.js","components/Purchase.js","actions/productActions.js","App.js","serviceWorker.js","reducers/loginReducer.js","reducers/productReducer.js","index.js"],"names":["loading","type","registerSuccess","registerFailed","error","loginSuccess","data","token","nickname","loginFailed","logoutSuccess","logoutFailed","NavBar","props","logout","dispatch","console","log","JSON","stringify","fetch","method","mode","headers","then","response","ok","catch","finally","setCategory","item","setState","currentCategory","category","setSubCategory","state","categories","header","this","className","Header","isLogged","Button","onClick","style","position","to","map","index","key","products","categoryName","React","Component","connect","login","Login","onChange","event","target","name","value","onLogin","username","length","password","alert","user","email","request","body","json","Form","Field","htmlFor","Register","onSubmit","preventDefault","passwordverification","onRegister","submit","as","Product","Modal","trigger","product","centered","label","Content","image","Image","maxWidth","maxHeight","src","Description","description","price","priceTypeText","ProductList","basket","amount","modalOpen","items","list","Table","Row","Cell","quantity","productId","defaultValue","min","max","disabled","text","celled","HeaderCell","Body","BasketList","show","width","height","Basket","basketCost","cost","i","toFixed","showBasket","showBasketList","size","parseInt","right","top","basketSize","Purchase","purchases","id","onPurchase","fetchProductsSuccess","fetchProductsFailed","App","updateQuantity","tempProducts","addToBasket","tempAmount","tempItems","tempItem","_id","splice","emptyBasket","removeFromBasket","undefined","statusText","path","render","withRouter","Boolean","window","location","hostname","match","saveToStorage","sessionStorage","setItem","initialState","getItem","parse","loginReducer","action","tempState","productReducer","rootReducer","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.4f248e4b.chunk.js","sourcesContent":["\r\n\r\nexport const LOADING = \"LOADING\"\r\nexport const END_LOADING = \"END_LOADING\"\r\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\"\r\nexport const REGISTER_FAILED = \"REGISTER_FAILED\"\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\"\r\nexport const LOGIN_FAILED = \"LOGIN_FAILED\"\r\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\"\r\nexport const LOGOUT_FAILED = \"LOGOUT_FAILED\"\r\n\r\nexport const onRegister = (user) => {\r\n    return dispatch => {\r\n        let request = {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(user)\r\n        }\r\n        dispatch(loading());\r\n        fetch(\"/shop/user/register\", request).then(response => {\r\n            if (response.ok) {\r\n                alert(\"Register success\");\r\n                dispatch(registerSuccess());\r\n            } else {\r\n                alert(\"Register failed. Is username already in use?\");\r\n                dispatch(registerFailed(\"Register failed. Is username already in use?\"));\r\n            }\r\n        }).catch(error => {\r\n            dispatch(registerFailed(error));\r\n        })\r\n    }\r\n}\r\n\r\nexport const onLogin = (user) => {\r\n    return dispatch => {\r\n        let request = {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(user)\r\n        }\r\n        dispatch(loading());\r\n        fetch(\"/shop/user/login\", request).then(response => {\r\n            if (response.ok) {\r\n                response.json().then(data => {\r\n                    console.log(\"login response OK\");\r\n                    dispatch(loginSuccess(data));\r\n                    \r\n                }).catch(error => {\r\n                    dispatch(loginFailed(\"Failed to parse response. Reason:\"+error))\r\n                })\r\n            } else {\r\n                dispatch(loginFailed(\"Login failed. Please provide proper credentials.\"))\r\n            }\r\n        }).catch(error => {\r\n            dispatch(loginFailed(error));\r\n        })\r\n    }\r\n}\r\n\r\nexport const onLogout = (token) => {\r\n    console.log(\"logout.js logout state:\" + JSON.stringify(token))\r\n    return dispatch => {\r\n        let request = {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            headers: { \"Content-Type\": \"application/json\", \"token\": token }\r\n        }\r\n        fetch(\"/shop/user/logout\", request).then(response => {\r\n            console.log(\"Logout kutsuttu\");\r\n            if(response.ok) {\r\n                dispatch(logoutSuccess());\r\n                //dispatch(clearContactReducerState());\r\n            } else {\r\n                dispatch(logoutFailed(\"Server responded with an error. Logging out\"))\r\n            // dispatch(clearContactReducerState());\r\n            }\r\n        }).catch(error => {\r\n            dispatch(logoutFailed(\"Server responded with an error. Error:\"+error))\r\n            //dispatch(clearContactReducerState());\r\n            return false;\r\n        }).finally(() => {\r\n            console.log(\"Finally\")\r\n            return true;\r\n        })\r\n    }\r\n}\r\n\r\n//Reducer Action Creators\r\n\r\nexport const loading = () => {\r\n\treturn {\r\n\t\ttype:LOADING\r\n\t}\r\n}\r\n\r\nexport const endLoading = () => {\r\n\treturn {\r\n\t\ttype:END_LOADING\r\n\t}\r\n}\r\n\r\nexport const registerSuccess = () => {\r\n\treturn {\r\n\t\ttype:REGISTER_SUCCESS\r\n\t}\r\n}\r\n\r\nexport const registerFailed = (error) => {\r\n\treturn {\r\n\t\ttype:REGISTER_FAILED,\r\n\t\terror:error\r\n\t}\r\n}\r\n\r\nexport const loginSuccess = (data) => {\r\n\treturn {\r\n\t\ttype:LOGIN_SUCCESS,\r\n        token:data.token,\r\n        nickname:data.nickname\r\n\t}\r\n}\r\n\r\nexport const loginFailed = (error) => {\r\n\treturn {\r\n\t\ttype:LOGIN_FAILED,\r\n\t\terror:error\r\n\t}\r\n}\r\n\r\nexport const logoutSuccess = () => {\r\n\treturn {\r\n\t\ttype:LOGOUT_SUCCESS\r\n\t}\r\n}\r\n\r\nexport const logoutFailed = (error) => {\r\n\treturn {\r\n\t\ttype:LOGOUT_FAILED\r\n\t}\r\n}","import React, { Component, Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Header, Button } from 'semantic-ui-react';\r\nimport {connect} from 'react-redux';\r\nimport {onLogout} from '../actions/loginActions';\r\nimport '../App.css';\r\n\r\n\r\nclass NavBar extends React.Component {\r\n\r\n\tlogout = () => {\r\n\t\tthis.props.dispatch(onLogout(this.props.token));\r\n\t}\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentCategory: this.props.categories,\r\n\t\r\n\t\t}\r\n\t}\r\n\r\n\tsetCategory = (item) => {\r\n\t\tconsole.log(\"item \", item);\r\n\t\tif (item !== null) {\r\n\t\t\tthis.setState({ currentCategory: item });\r\n\t\t\tthis.props.category(item);\r\n\t\t} else {\r\n\t\t\tthis.setState({ currentCategory: [] });\r\n\t\t}\r\n\t}\r\n\tsetSubCategory = (item) => {\r\n\t\tthis.props.category(item);\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tlet button = {\r\n\t\t\tposition: \"float:left\",\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\tlet header = \"FS - Shop\";\r\n\t\tif(this.props.loading) {\r\n\t\t\theader = \"Loading...\"\r\n\t\t}\r\n\t\tif(this.props.error) {\r\n\t\t\theader = \"Error:\"+this.props.error\r\n\t\t}\r\n\t\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<div className=\"fs-navbar-header\">\r\n\t\t<Header className=\"fs-navbar-header\">{header}</Header>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"fs-navbar-buttons\">\r\n\t\t\t\t\t{this.props.isLogged ? \t\t\t\t\t\r\n\t\t\t\t\t\t\t<div className=\"fs-useraction-section\">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\tHello {this.props.nickname},\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<div className=\"logoutButton\">\r\n\t\t\t\t\t\t\t\t\t<Button onClick={()=>this.logout()}>\r\n\t\t\t\t\t\t\t\t\t\tLog out\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t:\t\t\r\n\t\t\t\t\t<div className=\"fs-useraction-section\">\t\t\t\r\n\t\t\t\t\t\t\t<Button style={button} onClick={() => this.setCategory(null)}><Link to=\"/login\">Login</Link></Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tChoose category below:\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Link to=\"/list\">{this.props.categories.map((item, index) =>\r\n\t\t\t\t\t\t\t\t\t<Button key={index} onClick={() => this.setCategory(item.products)}>{item.categoryName}</Button>\r\n\t\t\t\t\t\t\t\t)}</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Fragment>\r\n\t\t\t\t\r\n\r\n\r\n\t\t)\r\n\t}\r\n\r\n}\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\terror:state.login.error,\r\n\t\tloading:state.login.loading,\r\n\t\tisLogged:state.login.isLogged,\r\n\t\ttoken:state.login.token,\r\n\t\tnickname:state.login.nickname\r\n\t}\t\r\n}\r\n\r\nexport default connect(mapStateToProps)(NavBar);","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {Form,Button} from 'semantic-ui-react';\nimport {connect} from 'react-redux';\nimport {onLogin} from '../actions/loginActions';\n\nclass Login extends React.Component {\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tusername:\"\",\n\t\t\tpassword:\"\"\n\t\t}\n\t}\n\t\n\tonChange = (event) => {\n\t\tlet state = {}\n\t\tstate[event.target.name] = event.target.value\n\t\tthis.setState(state);\n\t}\n\n\tonLogin = () => {\n\t\tif(this.state.username.length < 4 || this.state.password.length < 8) {\n\t\t\talert(\"Username must be four characters and password eight characters long\");\n\t\t\treturn;\n\t\t}\n\t\tlet user = {\n\t\t\temail:this.state.username,\n\t\t\tpassword:this.state.password\n\t\t}\n\t\tthis.props.dispatch(onLogin(user));\n\t}\n\n\t\n\t\n\trender() {\n\t\treturn(\n\t\t\t<Form>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t\tvalue={this.state.username}\n\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t\t<input type=\"password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Link to=\"/register\"><Button>Register</Button></Link>\n\t\t\t\t<Button onClick={this.onLogin}>Login</Button>\n\t\t\t</Form>\n\t\t)\n\t}\n\n}\nexport default connect()(Login);","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {Form, Button, Header} from 'semantic-ui-react';\nimport {connect} from 'react-redux';\nimport {onRegister} from '../actions/loginActions';\n\nclass Register extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tnickname:\"\",\n\t\t\temail:[],\n\t\t\tpassword:\"\",\n\t\t\tpasswordverification:\"\"\n\t\t}\n\t}\n\n\tonChange = (event) => {\n\t\tlet state = {};\n\t\tstate[event.target.name] = event.target.value;\n\t\tthis.setState(state);\n\t}\n\t\n\tonSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tif(this.state.nickname.length === 0 || this.state.email.length === 0) {\n\t\t\talert(\"All fields required\")\n\t\t\treturn;\n\t\t}\n\t\tlet user = {\n\t\t\t\n\t\t\tnickname:this.state.nickname,\t\t\n\t\t\temail:this.state.email,\n\t\t\tpassword:this.state.password,\n\t\t\tpasswordverification: this.state.passwordverification,\n\t\t}\n\t\tthis.props.dispatch(onRegister(user));\n\t\tthis.setState({\n\t\t\tnickname:\"\",\n\t\t\temail:[],\n\t\t\tpassword:\"\",\n\t\t\tpasswordverification:\"\"\n\t\t})\n\t}\n\t\n\t\n\tsubmit = (event) => {\n\t\tevent.preventDefault();\n\t}\n\t\n\trender() {\n\t\t\n\t\treturn (\n\t\t<div>\n\t\t\t<Form onSubmit={this.submit}>\n\t\t\t\t<Header as='h2'>Register account</Header>\t\t\t\t\n\t\t\t\t<Form.Field>\t\n\t\t\t\t\t<label htmlFor=\"nickname\">Nickname(4 characters)</label>\n\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\t\tname=\"nickname\"\n\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\tvalue={this.state.nickname}/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Form.Field>\t\n\t\t\t\t\t<label htmlFor=\"nickname\">Email(valid email)</label>\n\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\tvalue={this.state.email}/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label htmlFor=\"password\">Password(8 characters + special)</label>\n\t\t\t\t\t<input type=\"password\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label htmlFor=\"password\">Password verification</label>\n\t\t\t\t\t<input type=\"passwordverification\"\n\t\t\t\t\t\t\tname=\"passwordverification\"\n\t\t\t\t\t\t\tvalue={this.state.passwordverification}\n\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t</Form.Field>\t\t\t\n\t\t\t</Form>\n\t\t\t<Button onClick={this.onSubmit}>Save</Button>\n\t\t\t<Link to=\"/\"><Button>Home</Button></Link>\n\t\t</div>\n\t\t)\n\t}\n}\n\nexport default connect()(Register);","import React from 'react';\nimport {Modal, Image, Header, Button} from 'semantic-ui-react';\nimport '../App.css';\nexport default class Product extends React.Component {\n\n    render(){\n        \n        return(\n        <Modal  trigger={<Button>{this.props.product.name} details</Button>} centered={false}>\n                <Modal.Header>{this.props.product.label}</Modal.Header>\n                <Modal.Content image ><Image style={{maxWidth:'200px',maxHeight:'200px'}} src={this.props.product.image}></Image>\n                \n                <Modal.Description>\n                    <Header> {this.props.product.name}</Header>\n                    <p>\n                    {this.props.product.description}\n                    </p>\n                    <p>Price: {this.props.product.price}&nbsp;{this.props.product.priceTypeText}</p>\n                </Modal.Description>\n                </Modal.Content>\n            </Modal>\n        )\n    }\n\n}","import React from 'react';\nimport {Table, Image, Button} from 'semantic-ui-react';\nimport Product from './Product';\nimport '../App.css';\n\nexport default class ProductList extends React.Component {\n\t \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {  \n\t\t\tmodalOpen: false\n\t\t}\n\t}\n\n\tbasket = (item, amount) => {\n        this.props.basket(item, amount);\n        //console.log(item);       \n\t}\n\n\tonChange = (event) => {\n\t\tlet state = {};\n\t\tstate[event.target.name] = event.target.value;\n\t\tthis.setState(state);\n\t}\n\t\n\trender() {\n\t\tlet items = this.props.list.map((item,index) =>  \n\t\t\t\n\t\t\t<Table.Row key={index}> \n\t\t\t\t<Table.Cell><Image src={item.image}></Image></Table.Cell>\n\t\t\t\t<Table.Cell>{<Product product={item}/>}</Table.Cell>\n\t\t\t\t{/*<Table.Cell>{item.name}</Table.Cell>*/}\n\t\t\t\t<Table.Cell>{item.quantity}</Table.Cell>\n\t\t\t\t<Table.Cell>{item.price}&nbsp;{item.priceTypeText}</Table.Cell>\n\t\t\t\t<Table.Cell>{item.quantity <= 0 || this.props.label === \"Basket\" ? '' :\n\t\t\t\t\t\t\t<input type=\"number\"\n\t\t\t\t\t\t\tname={item.productId}\n\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\tdefaultValue=\"1\"\n\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\tmax={item.quantity}\n\t\t\t\t\t\t\tvalue={this.state[item.productId] > item.quantity ? item.quantity : this.state[item.productId]}/>}\n\t\t\t\t\t\t\t<Button onClick={() =>\n\t\t\t\t\t\t\tthis.basket(item, this.state[item.productId] <= item.quantity ? this.state[item.productId] : this.state[item.productId] ? item.quantity : 1)}\n\t\t\t\t\t\t\tdisabled={true ? item.quantity <= 0 : false}>{this.props.text} basket</Button></Table.Cell>\n\t\t\t</Table.Row>\n\t\t)\n\t\treturn (\n\t\t\t<Table celled  className=\"fs-products-table\">\n\t\t\t\t<Table.Header>\n\t\t\t\t\t\n\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t<Table.HeaderCell></Table.HeaderCell>\n\t\t\t\t\t\t<Table.HeaderCell></Table.HeaderCell>\n\t\t\t\t\t\t<Table.HeaderCell>Quantity</Table.HeaderCell>\n\t\t\t\t\t\t<Table.HeaderCell>Price</Table.HeaderCell>\n\t\t\t\t\t\t\n\t\t\t\t\t</Table.Row>\n\t\t\t\t</Table.Header>\n\t\t\t\t<Table.Body>\n\t\t\n\t\t\t\t\t{items}\n\n\t\t\t\t</Table.Body>\n\t\t\t</Table>\n\t\t\n\t\t)\n\t}\n}","import React from 'react';\nimport {Table, Image, Button} from 'semantic-ui-react';\nimport Product from './Product';\n\n\nexport default class BasketList extends React.Component {\n\t \n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {  \n\t\t\tmodalOpen: false\n\t\t}\n\t}\n\n\tbasket = (item, amount) => {\n\t\tthis.props.basket(item, amount);\n\t\tif (this.props.list.length ===0){\n\t\t\tthis.props.show();\n\t\t}\n        //console.log(item);       \n\t}\n\n\tonChange = (event) => {\n\t\tlet state = {};\n\t\tstate[event.target.name] = event.target.value;\n\t\tthis.setState(state);\n\t}\n\t\n\trender() {\n\t\tlet items = this.props.list.map((item,index) =>  \n\t\t\t<Table.Row key={index}>\n\t\t\t\t\n\t\t\t\t<Table.Cell><Image src={item.image} width={500} height={300} mode='fit' ></Image></Table.Cell>\n\t\t\t\t{<Product product={item}/>}\n\t\t\t\t<Table.Cell>{item.quantity}</Table.Cell>\n\t\t\t\t<Table.Cell>{item.price}</Table.Cell>\n\t\t\t\t<Table.Cell>{item.quantity <= 0 || this.props.label === \"Basket\" ? '' :\n\t\t\t\t\t\t\t<input type=\"number\"\n\t\t\t\t\t\t\tname={item.productId}\n\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\tmax={item.quantity}\n\t\t\t\t\t\t\tvalue={this.state[item.productId] > item.quantity ? item.quantity : this.state[item.productId]}/>}\n\t\t\t\t\t\t\t<Button onClick={() =>\n\t\t\t\t\t\t\tthis.basket(item, this.state[item.productId] <= item.quantity ? this.state[item.productId] : this.state[item.productId] ? item.quantity : 1)}\n\t\t\t\t\t\t\tdisabled={true ? item.quantity <= 0 : false}>{this.props.text} basket</Button></Table.Cell>\n\t\t\t</Table.Row>\n\t\t)\n\t\treturn (\n\t\t\t<Table celled>\n\t\t\t\t<Table.Header>\n\t\t\t\t\t\n\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t<Table.HeaderCell></Table.HeaderCell>\n\t\t\t\t\t\t<Table.HeaderCell></Table.HeaderCell>\n\t\t\t\t\t\t<Table.HeaderCell>Quantity</Table.HeaderCell>\n\t\t\t\t\t\t<Table.HeaderCell>Price</Table.HeaderCell>\n\t\t\t\t\t\t\n\t\t\t\t\t</Table.Row>\n\t\t\t\t</Table.Header>\n\t\t\t\t<Table.Body>\n\t\t\n\t\t\t\t\t{items}\n\n\t\t\t\t</Table.Body>\n\t\t\t</Table>\n\t\t\n\t\t)\n\t}\n}","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {Button} from 'semantic-ui-react';\nimport BasketList from './BasketList'\n\n\nexport default class Basket extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { \n\t\t\tshowBasketList: false,\n\t\t}\n    }\n    \n    basketSize() {\n        let size =0;\n        for (let i=0; i<this.props.list.length; i++){ \n            size += parseInt(this.props.list[i].quantity);\n        }\n\t\treturn size;\n\t}\n\t\n\tbasketCost = () => {\n        let cost =0;\n        for (let i=0; i<this.props.list.length; i++){ \n            cost += this.props.list[i].quantity * this.props.list[i].price;\n        }   \n\t\treturn cost.toFixed(2);\n\t}\n\t\n\tshowBasket = () => {\n\t\tthis.setState({showBasketList: !this.state.showBasketList});\t\t\n\t}\n\n\trender() {\t\t\n\t\t\n\t\t\tlet styleBasket = {\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tright: \"100px\",\n\t\t\t\ttop: \"15px\",\n\t\t\t\t//height:100,\n\t\t\t\t//backgroundColor:\"lightblue\"\n\t\t\t}\n\t\t\tif (this.props.list.length > 0){\n\t\t\t\treturn (\n\t\t\t\t\t<div style={styleBasket}>\n\t\t\t\t\t\t<button  onClick={this.showBasket}>\t\t\t\t\n\t\t\t\t\t\t\tAmount:{this.basketSize()}\n\t\t\t\t\t\t\t<hr/>\n\t\t\t\t\t\t\tPrice total:{this.basketCost()}\t\t\t\t\t\n\t\t\t\t\t\t</button>\t\t\t\t\n\t\t\t\t\t\t{this.state.showBasketList ? \n                            <BasketList list={this.props.list} basket={this.props.basket} text=\"Remove from\" label=\"Basket\" show={this.showBasket}/> :\n                            <div></div>}\n                        {this.props.isLogged ? <Button onClick={()=>this.setState({showBasketList: false})}><Link to=\"/purchase\">Cash out</Link></Button> : <Button onClick={()=>this.setState({showBasketList: false})}><Link to=\"/login\">Login</Link></Button>}\n\t\t\t\t\t</div>\t\n\t\t\t\t)\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn (<div></div>)\n\t\t\t}\n\t\t}\n}\n\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Table, Button, Image } from 'semantic-ui-react';\nimport Product from './Product';\n\nexport default class Purchase extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmodalOpen: false\n\t\t}\n\t}\n\n\tbasket = (item, amount) => {\n\t\tthis.props.basket(item, amount);\n\t\t//console.log(item);       \n\t}\n\n\tonChange = (event) => {\n\t\tlet state = {};\n\t\tstate[event.target.name] = event.target.value;\n\t\tthis.setState(state);\n\t}\n\tonSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tlet list = this.props.list;\n\t\tconst purchases = list.map(({ name, id, image, price, description, ...rest }) => rest)\n\t\tthis.props.onPurchase(purchases);\n\t}\n\trender() {\n\t\tlet items = this.props.list.map((item, index) =>\n\t\t\t<Table.Row key={index}>\n\n\t\t\t\t<Table.Cell>{item.name}</Table.Cell>\n\n\t\t\t\t<Table.Cell>{item.quantity}</Table.Cell>\n\t\t\t\t<Table.Cell>{item.price}</Table.Cell>\n\t\t\t\t<Table.Cell>\n\t\t\t\t\t<Button onClick={() =>\n\t\t\t\t\t\tthis.basket(item, this.state[item.productId] <= item.quantity ? this.state[item.productId] : this.state[item.productId] ? item.quantity : 1)}\n\t\t\t\t\t\tdisabled={true ? item.quantity <= 0 : false}>{this.props.text} basket</Button></Table.Cell>\n\t\t\t</Table.Row>\n\t\t)\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Table celled>\n\t\t\t\t\t<Table.Header>\n\n\t\t\t\t\t\t<Table.Row>\n\n\t\t\t\t\t\t\t<Table.HeaderCell></Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell>Quantity</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell>Price</Table.HeaderCell>\n\n\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t</Table.Header>\n\t\t\t\t\t<Table.Body>\n\n\t\t\t\t\t\t{items}\n\n\t\t\t\t\t</Table.Body>\n\t\t\t\t</Table>\n\t\t\t\t<Button onClick={this.onSubmit}>Confirm purchase</Button>\n\t\t\t\t<Link to=\"/\"><Button>Cancel</Button></Link>\n\t\t\t</div>\n\t\t)\n\t}\n}","import {loading,endLoading} from './loginActions';\r\n\r\nexport const FETCH_PRODUCTS_SUCCESS = \"FETCH_PRODUCTS_SUCCESS\"\r\nexport const FETCH_PRODUCTS_FAILED = \"FETCH_PRODUCTS_FAILED\"\r\n\r\n\r\nexport const getProducts = () => {\r\n\treturn dispatch => {\r\n\t\tlet request = {\r\n\t\t\tmethod:\"GET\",\r\n\t\t\tmode:\"cors\",\r\n\t\t\theaders:{\"Content-type\":\"application/json\" }\r\n\t\t}\r\n\t\t\r\n        dispatch(loading());\r\n        fetch(\"/shop/products\", request).then(response => {\r\n            dispatch(endLoading());\r\n            if (response.ok) {\r\n                console.log(\"1\", response);\r\n                response.json().then(data => {\r\n                    dispatch(fetchProductsSuccess(data))\r\n                    console.log(\"2\", data);\r\n                    \r\n                }).catch(error => {\r\n                    dispatch(fetchProductsFailed(\"Failed to parse information. Try again\"));\r\n                })\r\n            } else {\r\n                console.log(\"No data\");\r\n                dispatch(fetchProductsFailed(\"Server responded with status:\"+response.statusText));\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n            dispatch(endLoading());\r\n\t\t\tdispatch(fetchProductsFailed(\"Server responded with an error:\"+error));\r\n        })\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport const fetchProductsSuccess = (data) => {\r\n\treturn {\r\n\t\ttype:FETCH_PRODUCTS_SUCCESS,\r\n        categories: data\r\n\t}\r\n}\r\n\r\nexport const fetchProductsFailed = (error) => {\r\n\treturn {\r\n\t\ttype:FETCH_PRODUCTS_FAILED,\r\n\t\terror:error\r\n\t}\r\n}","import React, { Fragment } from 'react';\r\nimport './App.css';\r\n\r\nimport NavBar from './components/NavBar';\r\nimport Login from './components/Login';\r\nimport Register from './components/Register';\r\n\r\n\r\nimport ProductList from './components/ProductList';\r\nimport Basket from './components/Basket';\r\nimport Purchase from './components/Purchase';\r\n\r\nimport {withRouter, Switch, Route, Redirect } from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {getProducts} from './actions/productActions';\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\r\n\t\t\tbasket: [],\r\n\t\t\tbasketSize: 0,\r\n\t\t\tcategory: [],\r\n\t\t\t\r\n\t\t\ttoken: null,\r\n\t\t\tnickname:undefined\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.props.dispatch(getProducts());\r\n\r\n\t}\r\n\r\n\tupdateQuantity = (id, amount) => {\r\n\t\tlet tempProducts = this.state.category;\r\n\t\tfor (let i = 0; i < tempProducts.length; i++) {\r\n\t\t\tif (id === tempProducts[i].productId) {\r\n\t\t\t\tconsole.log('quantity', amount);\r\n\t\t\t\ttempProducts[i].quantity += parseInt(amount);\r\n\t\t\t\t//this.setState({products: tempProducts});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\taddToBasket = (item, amount) => {\r\n\t\t//let amount =1;\r\n\t//\tthis.updateStock(item, -amount);   //quantity update to mongo\r\n\t\tconsole.log(item + ' ADD to basket');\r\n\t\tlet tempAmount = 0;\r\n\t\tlet tempItems = [];\r\n\t\tfor (let i = 0; i < this.state.basket.length; i++) {\r\n\t\t\tif (item.productId === this.state.basket[i].productId) {\r\n\t\t\t\tconsole.log(item.productId + ' Found in basket');\r\n\t\t\t\ttempItems = this.state.basket;\r\n\t\t\t\ttempAmount = parseInt(tempItems[i].quantity) + parseInt(amount);\r\n\t\t\t\tconsole.log(tempAmount);\r\n\t\t\t\tlet tempItem = {\r\n\t\t\t\t\tid: tempItems[i]._id,\r\n\t\t\t\t\tproductId: tempItems[i].productId,\r\n\t\t\t\t\tname: tempItems[i].name,\r\n\t\t\t\t\tprice: tempItems[i].price,\r\n\t\t\t\t\tquantity: tempAmount,\r\n\t\t\t\t\timage: tempItems[i].image,\r\n\t\t\t\t\tdescription: tempItems[i].description,\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateQuantity(item.productId, parseInt(-amount));\r\n\t\t\t\ttempItems.splice(i, 1, tempItem);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbasket: tempItems\r\n\t\t\t\t})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet tempItem = {\r\n\t\t\tid: item._id,\r\n\t\t\tproductId: item.productId,\r\n\t\t\tname: item.name,\r\n\t\t\tprice: item.price,\r\n\t\t\tquantity: amount,\r\n\t\t\timage: item.image,\r\n\t\t\tdescription: item.description,\r\n\t\t}\r\n\t\tthis.updateQuantity(item.productId, parseInt(-amount));\r\n\t\tthis.setState({ basket: [...this.state.basket, tempItem] });\r\n\t\treturn;\r\n\t}\r\n\r\n\temptyBasket = () => {\r\n\t\tthis.setState({basket: []});\r\n\t}\r\n\r\n\tremoveFromBasket = (item) => {\r\n\t//\tthis.updateStock(item, item.quantity);\t//quantity update to mongo\r\n\t\tconsole.log(item.productId + ' Remove from basket');\r\n\t\tlet tempItems = [];\r\n\t\tfor (let i = 0; i < this.state.basket.length; i++) {\r\n\t\t\tif (item.productId === this.state.basket[i].productId) {\r\n\t\t\t\tconsole.log(item.productId + ' Found in basket');\r\n\t\t\t\ttempItems = this.state.basket;\r\n\t\t\t\tthis.updateQuantity(item.productId, tempItems[i].quantity);\r\n\t\t\t\ttempItems.splice(i, 1);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbasket: tempItems\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsetCategory = (item) => {\r\n\t\tthis.setState({ category: item });\r\n\t}\r\n\t\r\n\tonPurchase = (list) => {\t\r\n\t\tlet request = {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tmode: \"cors\",\r\n\t\t\theaders: { \"Content-Type\": \"application/json\", token:this.props.token},\r\n\t\t\tbody: JSON.stringify(list)\r\n\t\t}\r\n\t\tfetch(\"/shop/api/cashout\", request).then(response => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\talert(\"Purchase success\");\r\n\t\t\t\tthis.emptyBasket();\r\n\t\t\t} else {\r\n\t\t\t\talert(\"Purchase failed.\");\r\n\t\t\t}\r\n\t\t}).catch(error => {\r\n\t\t\tconsole.log(error);\r\n\t\t})\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\r\n\t\t\t\t\t{//<NavBar state={this.state} isLogged={this.state.isLogged}  onLogout={this.onLogout}  />\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<NavBar categories={this.props.categories} category={this.setCategory}/>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<Route path=\"/list\" render={() => (\r\n\r\n\t\t\t\t\t\t\t<ProductList list={this.state.category} basket={this.addToBasket} text=\"Add to\" label=\"Products\" />\r\n\r\n\t\t\t\t\t\t)} />\r\n\t\t\t\t\t\t<Route path=\"/login\" render={() => (\r\n\t\t\t\t\t\t\tthis.props.isLogged ?\r\n\t\t\t\t\t\t\t\t<Redirect to=\"/list\" /> :\r\n\t\t\t\t\t\t\t\t<Login onLogin={this.onLogin} />\r\n\t\t\t\t\t\t)} />\r\n\t\t\t\t\t\t<Route path=\"/register\" render={() => (\r\n\t\t\t\t\t\t\tthis.props.isLogged ?\r\n\t\t\t\t\t\t\t\t<Redirect to=\"/list\" /> :\r\n\t\t\t\t\t\t\t\t<Register onRegister={this.onRegister} />\r\n\t\t\t\t\t\t)} />\r\n\t\t\t\t\t\t<Route path=\"/purchase\" render={() => (\r\n\t\t\t\t\t\t\tthis.props.isLogged ?\r\n\t\t\t\t\t\t\t\t<Purchase onPurchase={this.onPurchase} list={this.state.basket} basket={this.removeFromBasket} text=\"Remove from\" /> :\r\n\t\t\t\t\t\t\t\t<Redirect to=\"/list\" />\r\n\t\t\t\t\t\t)} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t\t<Basket list={this.state.basket} basket={this.removeFromBasket} isLogged={this.props.isLogged} />\r\n\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tisLogged:state.login.isLogged,\r\n\t\ttoken:state.login.token,\r\n\t\tnickname:state.login.nickname,\r\n\t\tcategories:state.product.categories,\r\n\t}\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(App));\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {\r\n\tLOADING,\r\n\tEND_LOADING,\r\n\tREGISTER_SUCCESS,\r\n\tREGISTER_FAILED,\r\n\tLOGIN_SUCCESS,\r\n\tLOGIN_FAILED,\r\n\tLOGOUT_SUCCESS,\r\n\tLOGOUT_FAILED\r\n} from '../actions/loginActions'\r\n\r\nconst getInitialStateFromStorage = () => {\r\n\tif(sessionStorage.getItem(\"loginstate\")) {\r\n\t\tlet loginstate = JSON.parse(sessionStorage.getItem(\"loginstate\"))\r\n\t\treturn loginstate\r\n\t} else {\r\n\t\treturn {\r\n\t\t\ttoken:\"\",\r\n\t\t\tisLogged:false,\r\n\t\t\tloading:false,\r\n\t\t\tnickname:\"\",\r\n\t\t\terror:\"\"\t\t\t\r\n\t\t}\t\t\r\n\t}\r\n}\r\n\r\nconst saveToStorage = (state) => {\r\n\tsessionStorage.setItem(\"loginstate\",JSON.stringify(state));\r\n}\r\n\r\nconst initialState = getInitialStateFromStorage();\r\n\r\nconst loginReducer = (state = initialState, action) => {\r\n\tlet tempState = {}\r\n\tswitch(action.type) {\r\n\t\tcase LOADING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading:true,\r\n\t\t\t\terror:\"\"\r\n\t\t\t}\r\n\t\tcase END_LOADING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading:false,\r\n\t\t\t\terror:\"\"\r\n\t\t\t}\r\n\t\tcase REGISTER_SUCCESS:\r\n\t\t\ttempState = {\r\n\t\t\t\t...state,\r\n\t\t\t\terror:\"\",\r\n\t\t\t\tloading:false\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tcase REGISTER_FAILED:\r\n\t\t\ttempState = {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading:false,\r\n\t\t\t\terror:action.error\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tcase LOGIN_SUCCESS:\r\n\t\t\ttempState = {\r\n\t\t\t\tisLogged:true,\r\n\t\t\t\ttoken:action.token,\r\n\t\t\t\tnickname:action.nickname,\r\n\t\t\t\terror:\"\",\r\n\t\t\t\tloading:false\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tcase LOGIN_FAILED:\r\n\t\t\ttempState = {\r\n\t\t\t\t...state,\r\n\t\t\t\terror:action.error,\r\n\t\t\t\tloading:false\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tcase LOGOUT_SUCCESS: \r\n\t\t\ttempState = {\r\n\t\t\t\ttoken:\"\",\r\n\t\t\t\tisLogged:false,\r\n\t\t\t\tloading:false,\r\n\t\t\t\terror:\"\",\r\n\t\t\t\tnickname:\"\"\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tcase LOGOUT_FAILED: \r\n\t\t\ttempState = {\r\n\t\t\t\ttoken:\"\",\r\n\t\t\t\tisLogged:false,\r\n\t\t\t\tnickname:\"\",\r\n\t\t\t\tloading:false,\r\n\t\t\t\terror:action.error\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default loginReducer;","import {\r\n\tFETCH_PRODUCTS_SUCCESS,\r\n\tFETCH_PRODUCTS_FAILED,\r\n\t\r\n} from '../actions/productActions';\r\n\r\nconst getInitialStateFromStorage = () => {\r\n\tif(sessionStorage.getItem(\"productstate\")) {\r\n\t\tlet productstate = JSON.parse(sessionStorage.getItem(\"productstate\"))\r\n\t\treturn productstate\r\n\t} else {\r\n\t\treturn {\r\n            categories:[],\r\n\t\t\terror:\"\",\r\n\t\t}\t\t\r\n\t}\r\n}\r\n\r\nconst saveToStorage = (state) => {\r\n\tsessionStorage.setItem(\"productstate\",JSON.stringify(state));\r\n}\r\n\r\nconst initialState = getInitialStateFromStorage();\r\n\r\nconst productReducer = (state=initialState,action) => {\r\n\tlet tempState = {};\r\n\tswitch(action.type) {\r\n\t\tcase FETCH_PRODUCTS_SUCCESS:\r\n\t\t\ttempState = {\r\n\t\t\t\t...state,\r\n                categories:action.categories,\r\n\t\t\t\terror:\"\"\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n\t\t\treturn tempState;\r\n\t\tcase FETCH_PRODUCTS_FAILED:\r\n\t\t\ttempState = {\r\n\t\t\t\t...state,\r\n\t\t\t\terror:action.error\r\n\t\t\t}\r\n\t\t\tsaveToStorage(tempState);\r\n            return tempState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n    \r\nexport default productReducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter} from 'react-router-dom';\nimport loginReducer from './reducers/loginReducer';\nimport {Provider} from 'react-redux';\nimport {createStore, applyMiddleware,combineReducers} from 'redux';\nimport thunk from 'redux-thunk';\nimport productReducer from './reducers/productReducer';\n\nconst rootReducer = combineReducers({\n\tlogin:loginReducer,\n\tproduct:productReducer,\n})\n\nconst store = createStore(rootReducer,applyMiddleware(thunk));\n\nReactDOM.render(\n  <React.StrictMode>\n  <Provider store={store}>\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>\n  </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}